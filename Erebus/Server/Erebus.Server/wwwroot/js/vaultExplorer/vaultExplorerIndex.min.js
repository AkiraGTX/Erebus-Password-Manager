var vaultExplorerIndex=function(e){var n="vault-tree",o="add-group-button",t="add-sub-group-button",d="add-entry-button";return e.init=function(){$("#"+n).jstree({core:{data:{url:function(e){return"/VaultExplorer/GetNodeItems"},data:function(e){return{parentId:e.id}}}}}),$("#"+o).on("click",e.addGroup),$("#"+t).on("click",e.addSubGroup),$("#"+d).on("click",e.addEntry),$("#"+n).on("changed.jstree",e.onTreeNodeChange)},e.onTreeNodeChange=function(e,n){n.node&&"group"===n.node.li_attr["node-type"]?($("#"+t).prop("disabled",!1),$("#"+d).prop("disabled",!1)):($("#"+t).prop("disabled",!0),$("#"+d).prop("disabled",!0))},e.addGroup=function(){$.ajax({url:"/VaultExplorer/AddOrEditGroup",method:"GET",data:{parentId:"#"}}).done(function(e){$("body").append(e)})},e.addSubGroup=function(){var e=$("#"+n).jstree().get_selected(!0);if(1==e.length){var o=e[0];$.ajax({url:"/VaultExplorer/AddOrEditGroup",method:"GET",data:{parentId:o.id}}).done(function(e){$("body").append(e)})}},e.addEntry=function(){},e.refreshNode=function(e){var o=$("#"+n).jstree(),t=o.get_node(e);o.load_node(t),o.open_node(t)},e.submitModalForm=function(n,o,t){$("#"+n).submit(function(n){var d=$(this).serializeArray(),r=$(this).attr("action");$.ajax({url:r,type:"POST",data:d,success:function(n,d,r){e.closeModal(o),e.refreshNode(t)},error:function(e,n,o){}}),n.preventDefault()}),$("#"+n).submit()},e.closeModal=function(e){$("#"+e).on("hidden.bs.modal",function(){$("#"+e).remove()}),$("#"+e).modal("hide")},e}(vaultExplorerIndex||{});$(function(){vaultExplorerIndex.init()});